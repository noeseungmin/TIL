# 스프링 타입 컨버터
웹 개발을 하다보면 문자를 숫자로 변환하거나, 숫자를 문자로 변환해야 하는 일이 상당히 많다.

`String data = request.getParameter("data")`

HTTP 요청 파라미터는 모두 문자(String)으로 처리된다. 

`Integer intValue = Integer.valueOf(data)`

자바에서 다른 타입으로 변환해서 사용하고 싶으면 숫자 타입으로 변환하는 과정을 거쳐야 한다.

#### @RequestParam
`@RequestParam Integer data`

근데 @RequestParam을 사용한다면? Integer타입의 숫자로 편리하게 받을 수 있다. (@ModelAttribute, @PathVariable도 마찬가지)

#### @ModelAttribute
```java
@ModelAttribute UserData data
class UserData {
 Integer data;
}
```

#### @PathVariable
`@PathVariable("userId") Integer data`

## Converter
```java
package org.springframework.core.convert.converter;
public interface Converter<S, T> {
 T convert(S source);
}
```
Converter<S,T> 형태에서 S는 입력값의 형태를, T에는 변환하길 원하는 형태를 의미한다. 

#### 문자를 숫자로 변환하는 타입 컨버터
```java
public class StringToIntegerConverter implements Converter<String, Integer> {
 @Override
 public Integer convert(String source) {
 return Integer.valueOf(source);
 }
}
```
String -> Integer로 변환하기 때문에 소스가 String이 된다. 이문자를 `Integer.valueOf(source)`를 사용해서 숫자로 변경한다음 그삿자를 반환하면 된다.

#### 숫자를 문자로 변환하는 타입 컨버터
```java
public class IntegerToStringConverter implements Converter<Integer, String> {
 @Override
 public String convert(Integer source) {
 return String.valueOf(source);
 }
}
```
위의 컨버터와 반대로 숫자로 입력된 소스가 Integer가 된다. `Stringg.valueOf(source);`를 사용하여 문자로 변경 문자를 반환한다.

### 사용자 정의 타입 컨버터
127.0.0.1:8080 과 같은 IP, PORT를 입력하면 IpPort 객체로 변환하는 컨버터를 만들어보자.
```java
@Getter
@EqualsAndHashCode
public class IpPort {
 private String ip;
 private int port;
 public IpPort(String ip, int port) {
 this.ip = ip;
 this.port = port;
 }
}
```
`@EqualsAndHashCode` 를 넣으면 모든 필드를 사용해서 `equals()` , `hashcode()` 를 생성한다. 따라서 모든 필드의 값이 같다면 `a.equals(b)` 의 결과가 참이 된다.

#### StringToIpPortConverter
```java
public class StringToIpPortConverter implements Converter<String, IpPort> {
 @Override
 public IpPort convert(String source) {
 String[] split = source.split(":");
 String ip = split[0];
 int port = Integer.parseInt(split[1]);
 return new IpPort(ip, port);
 }
}
```
127.0.0.1:8080 문자 입력시 IpPort 객체를 만들어 반환

#### IpPortToStringConverter
```java
public class IpPortToStringConverter implements Converter<IpPort, String> {
 @Override
 public String convert(IpPort source) {
 return source.getIp() + ":" + source.getPort();
 }
}
```
IpPort객체를 입력하면 127.0.0.1:8080같은 문자 반환

스프링은 용도에 따라 다양한 방식의 타입 컨버터를 제공한다. 
* `Converter` : 기본 타입 컨버터
* `ConverterFactory` : 전체 클래스 계층 구조가 필요할 때
* `GenericConverter`: 정교한 구현, 대상 필드의 애노테이션 정보 사용 가능
* `ConditionalGenericConverter` : 특정 조건이 참인 경우에만 실행


